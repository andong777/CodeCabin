<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>C#学习笔记（与Java、C、C++和Python对比） | Code Cabin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近准备学习一下Unity3D，在C#和JavaScript中选择了C#。所以，作为学习Unity3D的准备工作，首先需要学习一下C#。用了一两天的时间学了一下C#，感觉是处在C++和Java之间的一门语言。比Java更灵活，比C++更简单，确实是一门设计很优秀的语言。">
<meta property="og:type" content="article">
<meta property="og:title" content="C#学习笔记（与Java、C、C++和Python对比）">
<meta property="og:url" content="http://an-dong.info/2014/07/27/C学习笔记（与Java、C、C++和Python对比）/">
<meta property="og:site_name" content="Code Cabin">
<meta property="og:description" content="最近准备学习一下Unity3D，在C#和JavaScript中选择了C#。所以，作为学习Unity3D的准备工作，首先需要学习一下C#。用了一两天的时间学了一下C#，感觉是处在C++和Java之间的一门语言。比Java更灵活，比C++更简单，确实是一门设计很优秀的语言。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="C#学习笔记（与Java、C、C++和Python对比）">
<meta name="twitter:description" content="最近准备学习一下Unity3D，在C#和JavaScript中选择了C#。所以，作为学习Unity3D的准备工作，首先需要学习一下C#。用了一两天的时间学了一下C#，感觉是处在C++和Java之间的一门语言。比Java更灵活，比C++更简单，确实是一门设计很优秀的语言。">

  
    <link rel="alternative" href="/atom.xml" title="Code Cabin" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Code Cabin</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://an-dong.info"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-C学习笔记（与Java、C、C++和Python对比）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/27/C学习笔记（与Java、C、C++和Python对比）/" class="article-date">
  <time datetime="2014-07-27T12:46:53.000Z" itemprop="datePublished">7月 27 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      C#学习笔记（与Java、C、C++和Python对比）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近准备学习一下Unity3D，在C#和JavaScript中选择了C#。所以，作为学习Unity3D的准备工作，首先需要学习一下C#。用了一两天的时间学了一下C#，感觉是处在C++和Java之间的一门语言。比Java更灵活，比C++更简单，确实是一门设计很优秀的语言。</p>
<a id="more"></a>

<h3 id="基础概念和语法">基础概念和语法</h3>
<h4 id="基本数据类型">基本数据类型</h4>
<ul>
<li>C#中的基本数据类型分为值类型和引用类型。相比Java而言，增加了无符号数，多了C中的<code>struct</code>，字符串也成了基本类型。数值类型、枚举类型、<strong>结构体</strong>等是值类型。<strong>字符串</strong>、对象、数组、委托等是引用类型。</li>
<li>C#中的基本数据类型都有对应的包装类。编译时编译器会将基本类型转换成对应的类，如<code>int</code>对应<code>Int32</code>，<code>string</code>对应<code>String</code>。和Java中不同，基本类型的关键字只是对应类的<em>别名</em>，所以基本类型的变量也有自己的方法。</li>
<li>C#可以对数值类型进行类型转换。转换规则和Java和C/C++类似，注意C#中<code>bool</code>和<code>int</code>之间不能转换。基本类型中有转换成自身的静态方法<code>Parse</code>。此外，C#中还有专门的<code>Convert</code>类可以进行类型转换。</li>
<li>C#中的常量关键字是<code>const</code>和<code>readonly</code>。前者在编译时确定，需要在声明时赋值。后者在运行时确定，可以在声明之后赋值一次。</li>
</ul>
<h4 id="命名规范">命名规范</h4>
<p>函数的命名为首字母大写的驼峰命名法；变量首字母小写。<br>C#中入口方法为首字母大写的Main方法。</p>
<h4 id="预编译指令">预编译指令</h4>
<p>C#中可以使用预编译指令。如<code>#define</code>，<code>#if</code>，<code>pragma</code>等。但<code>#define</code>不能用于定义常量，只能定义符号。</p>
<h4 id="命名空间">命名空间</h4>
<p>C#的命名空间和C++的命令空间没有太多区别。如果学过Java或者Python，那么和这二者中<code>包</code>的概念也类似。</p>
<h4 id="类型推断">类型推断</h4>
<p>使用<code>var</code>关键字，类似于C++中的<code>auto</code>。在编译时确定，不会影响程序性能。</p>
<h4 id="基本输入输出">基本输入输出</h4>
<p>输入输出这一部分粗看比Java要简明一些：</p>
<pre><code>using System;
// <span class="keyword">...</span>
Console.Read();    // 读一个字符
Console.ReadLine(); // 读一行
Console.Write(); // 不换行写
Console.WriteLine(); // 写并换行
</code></pre><p>实现Java中的<code>nextXXX</code>：读一行然后用<code>string</code>的<code>split</code>方法切割，再转换成相应类型。</p>
<h4 id="基本语句">基本语句</h4>
<ul>
<li><code>switch</code>语句每一个<code>case</code>都要有<code>break</code>，除非该<code>case</code>为空。C#允许在<code>switch</code>中使用<code>goto</code>关键字。</li>
<li><p>增加<code>foreach</code>关键字。要求对象实现<code>IEnumerable</code>接口。使用方法同Python中的<code>for</code>：</p>
<pre><code>  <span class="keyword">foreach</span>(<span class="keyword">var</span> v <span class="keyword">in</span> list){ <span class="comment">// do something. }</span>
</code></pre></li>
</ul>
<h4 id="字符串">字符串</h4>
<ul>
<li>特殊符号<code>\</code>和<code>@</code>：<code>@</code>可以取消字符串内的转义，类似与Python中字符串前的<code>r</code>。</li>
<li>C#中不使用<code>%</code>语法表示输出中的变量，而是使用占位符<code>{x}</code>，x从0开始。</li>
<li><code>string</code>中自带的方法：<ul>
<li>Substring(int startindex,int len)</li>
<li>Replace(string oldValue,string newValue)</li>
<li>Split()</li>
<li>ToCharArray(int startindex，int len)</li>
<li>ToUpper()和ToLower()</li>
<li>== 和 !=</li>
</ul>
</li>
<li>C#中也有<code>StringBuilder</code>类，用法与Java中的类似。</li>
</ul>
<h4 id="数组">数组</h4>
<ul>
<li>和Java中的数组一样，C#中的数组也是对象，有自己的属性和方法。</li>
<li><p>C#支持声明普通的多维数组和交错数组（数组的数组）。注意声明的方式如下：</p>
<pre><code>  <span class="keyword">int</span>[,] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>, <span class="number">5</span>];
  <span class="keyword">int</span>[][] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][];
  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr2.Length;i++){
      arr2[i] = <span class="keyword">new</span> <span class="keyword">int</span>[i+<span class="number">1</span>];
  }
</code></pre></li>
<li><p>C#中也有与Java中<code>Arrays</code>类相似功能和用法的类<code>Array</code>。</p>
</li>
</ul>
<h4 id="unsafe、fixed、checked和unchecked"><code>unsafe</code>、<code>fixed</code>、<code>checked</code>和<code>unchecked</code></h4>
<ul>
<li>可以通过<code>unsafe</code>插入不安全的代码，代码中可以使用C/C++的指针。可以用在一个方法或一个代码块中。</li>
<li><code>fixed</code>指示垃圾回收器不要移动代码内的对象，以免发生错误。一般用于不安全代码中。</li>
<li><code>checked</code>和<code>unchecked</code>：在已检查的上下文中，算法溢出引发异常。 在未检查的上下文中，算法溢出被忽略并且结果被截断。</li>
</ul>
<h3 id="函数">函数</h3>
<h4 id="可见性">可见性</h4>
<ul>
<li>默认可见性为<code>private</code>。</li>
<li>增加了<code>internal</code>，为命名空间内可见。</li>
</ul>
<h4 id="参数和返回值">参数和返回值</h4>
<ul>
<li>数值类型和<code>struct</code>等采用值传递。</li>
<li>其他类型如对象、数组等拷贝自身引用的副本。以上和Java中的参数传递相同。</li>
<li><p>C#中增加了<code>ref</code>关键字，提供了在方法内修改实参的方法，类似于C/C++中的引用。写一个Swap方法如下：</p>
<pre><code>  <span class="keyword">static</span> <span class="type">void</span> <span class="type">Swap</span>(<span class="keyword">ref</span> <span class="type">int</span> x, <span class="keyword">ref</span> <span class="type">int</span> y)
  {
      <span class="type">int</span> t = x; x = y; y = t;
  }
  // 调用<span class="type">Swap</span>方法
  <span class="type">Swap</span>(<span class="keyword">ref</span> num1, <span class="keyword">ref</span> num2);
</code></pre></li>
<li><p>使用<code>params</code>关键字实现可变长参数传递，该参数需放在参数列表的最后，并且类型为数组。一个可变长参数的加法示例：</p>
<pre><code>  <span class="keyword">static</span> <span class="keyword">int</span> Sum(params <span class="keyword">int</span>[] arr)
  {
      <span class="keyword">int</span> <span class="keyword">sum</span> = <span class="number">0</span>;
      foreach (<span class="keyword">int</span> i in arr)
          <span class="keyword">sum</span> += i;
      <span class="keyword">return</span> <span class="keyword">sum</span>;
  }
  <span class="comment">// 调用Sum方法</span>
  <span class="keyword">int</span> <span class="keyword">sum</span> = Sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>);
</code></pre></li>
<li><p>C#还支持输出参数，用<code>out</code>表示。这样，可以实现返回多个参数，比Java更优雅，比C/C++更安全。计算除法得到商和余数的例子：</p>
<pre><code>  <span class="keyword">static</span> <span class="keyword">void</span> Divide(<span class="keyword">int</span> n, <span class="keyword">int</span> d, <span class="keyword">out</span> <span class="keyword">int</span> q, <span class="keyword">out</span> <span class="keyword">int</span> r)
  {
      q = n / d;
      r = n % d;
  }
  <span class="comment">// 调用Divide方法</span>
  Divide(n, d, <span class="keyword">out</span> q, <span class="keyword">out</span> r);
</code></pre></li>
</ul>
<h4 id="运算符重载">运算符重载</h4>
<p>C#支持运算符重载，使用方法同C/C++。<br>如C#中的<code>string</code>就实现了<code>==</code>的重载，所以用<code>==</code>就可以直接比较两个字符串的内容。</p>
<h4 id="委托">委托</h4>
<p>类似于C/C++的函数指针。通过委托可以封装已有的方法。<br>使用委托的步骤如下：</p>
<ol>
<li><p>定义函数类型：</p>
<pre><code> <span class="keyword">delegate</span> <span class="keyword">int</span> Operation(<span class="keyword">int</span> val1, <span class="keyword">int</span> val2);
</code></pre></li>
<li><p>声明该类型的变量：</p>
<pre><code> <span class="title">Operation</span> Oper;
</code></pre></li>
<li><p>实例化变量：</p>
<pre><code> <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Add</span>(<span class="keyword">int</span> val1, <span class="keyword">int</span> val2){<span class="keyword">return</span> val1+val2; }
 <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Subtract</span>(<span class="keyword">int</span> val1, <span class="keyword">int</span> val2){<span class="keyword">return</span> val1-val2; }
 <span class="keyword">if</span>(<span class="keyword">operator</span> == <span class="string">'+'</span>)
     Oper = <span class="keyword">new</span> Operation(Add);
 <span class="keyword">else</span>
     Oper = <span class="keyword">new</span> Operation(Subtract);
</code></pre></li>
<li><p>调用</p>
<pre><code> <span class="keyword">int</span> <span class="keyword">res</span> = Oper(val1, val2);
</code></pre></li>
</ol>
<h4 id="lambda表达式">lambda表达式</h4>
<p>由<code>delegate</code>可以得到匿名方法。但更简单的办法是使用lambda表达式。lambda表达式的格式是：</p>
<pre><code>x<span class="function"> =&gt;</span> {<span class="regexp">//</span> <span class="keyword">do</span> something <span class="reserved">with</span> x}
</code></pre><p>x是输入参数，编译器可以自动推断出它是什么类型的，如果没有输入参数，用<code>()</code>来代替。</p>
<h3 id="类与对象">类与对象</h3>
<h4 id="与struct的比较">与<code>struct</code>的比较</h4>
<ul>
<li><code>struct</code>有自己的属性和方法，可以看作轻量的类。</li>
<li><code>struct</code>继承自<code>System.ValueType</code>，类继承自<code>System.Object</code>。</li>
<li><code>struct</code>不能实现抽象和继承，不能声明无参构造函数或析构函数，可以用<code>new</code>创建也可以不使用。</li>
</ul>
<h4 id="getter/setter">getter/setter</h4>
<p>C#提供比Java更简单的getter、setter。例子：</p>
<pre><code><span class="keyword">private</span> <span class="keyword">string</span> name; <span class="comment">// 内部变量</span>
<span class="keyword">public</span> <span class="keyword">string</span> Name
{
    <span class="keyword">get</span> { <span class="keyword">return</span> name; }
    <span class="keyword">set</span> { name = <span class="keyword">value</span>; }
}
</code></pre><p>在<code>get</code>和<code>set</code>中就可以写对应的getter/setter。其中<code>value</code>为关键字，指代用户传入的参数。<br>更简单地，可以不指定内部变量：</p>
<pre><code><span class="keyword">public</span> <span class="keyword">int</span> Age { <span class="keyword">get</span>; <span class="keyword">set</span>; }
<span class="keyword">public</span> <span class="keyword">string</span> Name { <span class="keyword">get</span>; <span class="keyword">set</span>; }
</code></pre><h4 id="继承与多态">继承与多态</h4>
<ul>
<li>C#只支持单继承。继承和实现都用<code>：</code>表示。</li>
<li>C#中与Java中<code>super</code>用法相同的是<code>base</code>关键字。可以使用<code>base()</code>调用父类相应的构造方法。使用<code>base.XXX()</code>调用父类的XXX方法。</li>
<li>禁止类被继承，Java使用<code>final</code>关键字，C#中则用<code>sealed</code>。</li>
<li>C#实现多态也需要父类方法声明为<code>virtual</code>，同时还要在子类方法声明为<code>override</code>，这样才可以实现多态。</li>
</ul>
<h3 id="参考资料">参考资料</h3>
<p>[1] <a href="http://blog.csdn.net/jukai7/article/category/1530997" target="_blank" rel="external">http://blog.csdn.net/jukai7/article/category/1530997</a></p>
<p>[2] <a href="http://msdn.microsoft.com/zh-cn/library/aa287549" target="_blank" rel="external">http://msdn.microsoft.com/zh-cn/library/aa287549</a></p>
<p>[3] <a href="http://technet.microsoft.com/zh-cn/library/ms228602(v=vs.90).aspx" target="_blank" rel="external">http://technet.microsoft.com/zh-cn/library/ms228602(v=vs.90).aspx</a></p>
<p>[4] <a href="http://www.cnblogs.com/zhucai/archive/2011/02/16/csharp-compare-java.html" target="_blank" rel="external">http://www.cnblogs.com/zhucai/archive/2011/02/16/csharp-compare-java.html</a></p>
<p>[5] <a href="http://www.cnblogs.com/liulun/archive/2013/02/26/2909985.html" target="_blank" rel="external">http://www.cnblogs.com/liulun/archive/2013/02/26/2909985.html</a></p>
<p>[6] C#快速入门</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://an-dong.info/2014/07/27/C学习笔记（与Java、C、C++和Python对比）/" data-id="ycdujqktq0xun5oz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/08/03/推荐一个好用的VPN/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          推荐一个好用的VPN
        
      </div>
    </a>
  
  
    <a href="/2014/07/24/关于Cygwin——包管理、替换默认终端、同MSYS的比较/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">关于Cygwin——包管理、替换默认终端、同MSYS的比较</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cocos2d-x/">Cocos2d-x</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cocostudio/">Cocostudio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cygwin/">Cygwin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity3D/">Unity3D</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VPN/">VPN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习笔记/">学习笔记</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/推荐/">推荐</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程游戏/">编程游戏</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 20.00px;">C#</a><a href="/tags/Cocos2d-x/" style="font-size: 15.00px;">Cocos2d-x</a><a href="/tags/Cocostudio/" style="font-size: 10.00px;">Cocostudio</a><a href="/tags/Cygwin/" style="font-size: 10.00px;">Cygwin</a><a href="/tags/Git/" style="font-size: 15.00px;">Git</a><a href="/tags/Github/" style="font-size: 10.00px;">Github</a><a href="/tags/Python/" style="font-size: 15.00px;">Python</a><a href="/tags/Unity3D/" style="font-size: 15.00px;">Unity3D</a><a href="/tags/VPN/" style="font-size: 10.00px;">VPN</a><a href="/tags/学习笔记/" style="font-size: 20.00px;">学习笔记</a><a href="/tags/推荐/" style="font-size: 10.00px;">推荐</a><a href="/tags/游戏/" style="font-size: 10.00px;">游戏</a><a href="/tags/编程游戏/" style="font-size: 10.00px;">编程游戏</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08">August 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 andong777<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>